{{define "content"}}
<div class="page-header">
    <h2>My Notes</h2>
    <div class="header-actions">
        <a href="/notes/new" class="btn btn-primary">Create New Note</a>
        {{if .User.IsAdmin}}
        <div class="admin-quick-access">
            <span class="admin-label">Admin:</span>
            <a href="/admin/system" class="btn btn-sm btn-admin">System</a>
            <a href="/admin/topics" class="btn btn-sm btn-admin">Topics</a>
        </div>
        {{end}}
    </div>
</div>

{{if .Notes}}
<div class="card">
    <table class="notes-list">
        <thead>
            <tr>
                <th>Subject</th>
                <th>Last Updated</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {{range .Notes}}
            <tr>
                <td><a href="/notes/{{.ID}}">{{.Subject}}</a></td>
                <td>{{formatTime .UpdatedAt}}</td>
                <td class="actions">
                    <a href="/notes/{{.ID}}" class="btn btn-sm btn-info">View</a>
                    <a href="/notes/{{.ID}}/edit" class="btn btn-sm btn-warning">Edit</a>
                    <form method="POST" action="/notes/{{.ID}}/delete" class="delete-form">
                        <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
                        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this note?')">Delete</button>
                    </form>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>

{{if gt .TotalPages 1}}
<ul class="pagination">
    {{if gt .CurrentPage 1}}
    <li><a href="/notes?page={{subtract .CurrentPage 1}}" class="btn btn-sm">&laquo; Previous</a></li>
    {{end}}
    
    {{range $i := sequence .TotalPages}}
    <li class="{{if eq $.CurrentPage (add $i 1)}}active{{end}}">
        <a href="/notes?page={{add $i 1}}" class="btn btn-sm {{if eq $.CurrentPage (add $i 1)}}btn-primary{{end}}">{{add $i 1}}</a>
    </li>
    {{end}}
    
    {{if lt .CurrentPage .TotalPages}}
    <li><a href="/notes?page={{add .CurrentPage 1}}" class="btn btn-sm">Next &raquo;</a></li>
    {{end}}
</ul>
{{end}}

{{else}}
<div class="empty-state">
    <div class="empty-state-icon">üìù</div>
    <h3>You don't have any notes yet</h3>
    <p>Create your first note to get started</p>
    <a href="/notes/new" class="btn btn-primary">Create Your First Note</a>
</div>
{{end}}

<style>
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    
    .header-actions {
        display: flex;
        align-items: center;
        gap: 1rem;
    }
    
    .admin-quick-access {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem;
        background: rgba(220, 53, 69, 0.1);
        border: 1px solid rgba(220, 53, 69, 0.2);
        border-radius: 0.25rem;
    }
    
    .admin-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: #dc3545;
    }
    
    .btn-admin {
        background-color: #dc3545;
        border-color: #dc3545;
        color: white;
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        text-decoration: none;
        border-radius: 0.2rem;
        border: 1px solid transparent;
        transition: all 0.2s ease;
    }
    
    .btn-admin:hover {
        background-color: #c82333;
        border-color: #bd2130;
        color: white;
        text-decoration: none;
    }
    
    .card {
        background: var(--card-bg);
        border-radius: 0.25rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        margin-bottom: 1.5rem;
    }
    
    .notes-list {
        width: 100%;
        border-collapse: collapse;
    }
    
    .notes-list th, .notes-list td {
        padding: 0.75rem 1rem;
        border-bottom: 1px solid var(--border);
    }
    
    .notes-list th {
        background-color: rgba(0, 0, 0, 0.02);
        font-weight: 500;
        text-align: left;
    }
    
    .notes-list tr:last-child td {
        border-bottom: none;
    }
    
    .notes-list tr:hover {
        background-color: rgba(0, 0, 0, 0.02);
    }
    
    .actions {
        display: flex;
        gap: 8px;
    }
    
    .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
        border-radius: 0.2rem;
    }
    
    .btn-info {
        background-color: var(--info);
        border-color: var(--info);
        color: white;
    }
    
    .btn-warning {
        background-color: var(--warning);
        border-color: var(--warning);
        color: #212529;
    }
    
    .delete-form {
        display: inline;
    }
    
    .pagination {
        display: flex;
        justify-content: center;
        list-style: none;
        gap: 0.5rem;
        margin: 1.5rem 0;
    }
    
    .pagination .active a {
        font-weight: bold;
    }
    
    .empty-state {
        background-color: var(--card-bg);
        border-radius: 0.25rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        text-align: center;
        padding: 3rem 1.5rem;
    }
    
    .empty-state-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }
    
    .empty-state h3 {
        font-weight: 500;
        margin-bottom: 0.5rem;
    }
    
    .empty-state p {
        color: var(--text-light);
        margin-bottom: 1.5rem;
    }
    
    @media (max-width: 768px) {
        .page-header {
            flex-direction: column;
            align-items: stretch;
            gap: 1rem;
        }
        
        .header-actions {
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .admin-quick-access {
            justify-content: center;
        }
    }
</style>
{{end}} 